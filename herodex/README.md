# Herodex (å°ä¾ æˆé•¿å½•) æ’ä»¶

ä¸€ä¸ªæ¸¸æˆåŒ–çš„å­¦ä¹ æ¿€åŠ±ä¸è®°å½•ç³»ç»Ÿï¼Œå°†å°å­¦ç”Ÿçš„æ—¥å¸¸å­¦ä¹ ä»»åŠ¡è½¬åŒ–ä¸ºå¯Œæœ‰æ­¦ä¾ /ä¿®ä»™è¶£å‘³çš„"åŠŸè¯¾å‘ˆæŠ¥"å’Œ"æŠ€èƒ½ä¿®ç‚¼"è¿‡ç¨‹ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ® æ¸¸æˆåŒ–å­¦ä¹ ä½“éªŒ
- **æ­¦ä¾ é£æ ¼ç•Œé¢**: å°†å­¦ä¹ è¿‡ç¨‹åŒ…è£…æˆä¿®ç‚¼æ­¦åŠŸçš„ä½“éªŒ
- **æŠ€èƒ½æ ‘ç³»ç»Ÿ**: 1-6å¹´çº§è¯­æ•°è‹±ä¸‰ç§‘çŸ¥è¯†ç‚¹çš„å®Œæ•´æŠ€èƒ½æ ‘
- **ç­‰çº§ç§°å·**: ä»"åˆçª¥é—¨å¾„"åˆ°"ç™»å³°é€ æ"çš„æˆé•¿è·¯å¾„
- **ä¿®ä¸ºç‚¹ç³»ç»Ÿ**: é‡åŒ–å­¦ä¹ æˆæœï¼Œæ¿€å‘æŒç»­å­¦ä¹ åŠ¨åŠ›

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶é•¿ç®¡ç†åå°
- **ä»ªè¡¨ç›˜**: ä¸€ç›®äº†ç„¶çš„å­¦ä¹ è¿›åº¦æ€»è§ˆ
- **åŠŸè¯¾è¯„é˜…**: AIè¾…åŠ©çš„ä½œä¸šè¯„å®šç³»ç»Ÿ
- **æŠ€èƒ½ç®¡ç†**: çµæ´»çš„æŠ€èƒ½æ ‘é…ç½®å’Œç®¡ç†
- **è¿›åº¦è¿½è¸ª**: è¯¦ç»†çš„å­¦ä¹ æ´»åŠ¨è®°å½•

### ğŸ¤– AIæ™ºèƒ½è¯„å®š
- **è‡ªåŠ¨è¯„é˜…**: AIå¸ˆå‚…åˆ†æå­¦ä¹ å†…å®¹å¹¶ç»™å‡ºå»ºè®®
- **ä¸ªæ€§åŒ–åé¦ˆ**: æ­¦ä¾ é£æ ¼çš„é¼“åŠ±æ€§è¯„è¯­
- **æ™ºèƒ½å¥–åŠ±**: æ ¹æ®å­¦ä¹ å†…å®¹è‡ªåŠ¨åˆ†é…ä¿®ä¸ºç‚¹å’ŒæŠ€èƒ½ç†Ÿç»ƒåº¦

### ğŸ“± å“åº”å¼è®¾è®¡
- **å¤šä¸»é¢˜æ”¯æŒ**: Light/Darkä¸»é¢˜è‡ªåŠ¨é€‚é…
- **ç§»åŠ¨ç«¯å‹å¥½**: å®Œç¾æ”¯æŒæ‰‹æœºå’Œå¹³æ¿è®¾å¤‡
- **å›½é™…åŒ–**: ä¸­è‹±æ–‡åŒè¯­æ”¯æŒ

## å®‰è£…é…ç½®

### 1. æ•°æ®åº“åˆå§‹åŒ–

é¦–å…ˆéœ€è¦åœ¨Supabaseä¸­æ‰§è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ï¼š

```sql
-- åœ¨Supabase SQL Editorä¸­æ‰§è¡Œ
-- 1. å…ˆæ‰§è¡Œæ¡†æ¶çš„æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ (docs/design/database-initialization.sql)
-- 2. å†æ‰§è¡ŒHerodexçš„æ•°æ®åº“è„šæœ¬ (src/plugins/herodex/docs/database.mdä¸­çš„SQL)
```

### 2. ç¯å¢ƒå˜é‡é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.env` æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```env
# Supabaseé…ç½®
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# AIæœåŠ¡é…ç½® (å¯é€‰)
VITE_OPENAI_API_KEY=your_openai_api_key
```

### 3. æƒé™é…ç½®

ç¡®ä¿ç”¨æˆ·æ‹¥æœ‰ç›¸åº”çš„æƒé™ï¼š

**ç®¡ç†å‘˜æƒé™**:
- `ui.herodex.admin.view` - æŸ¥çœ‹ç®¡ç†åå°
- `db.hdx_*` - æ•°æ®åº“æ“ä½œæƒé™

**ç©å®¶æƒé™**:
- `ui.herodex.player.view` - æŸ¥çœ‹ç©å®¶ç•Œé¢
- `db.hdx_players.select/update` - ç©å®¶æ•°æ®æƒé™
- `db.hdx_daily_submissions.*` - åŠŸè¯¾å‘ˆæŠ¥æƒé™

## ä½¿ç”¨æŒ‡å—

### å®¶é•¿ç«¯æ“ä½œæµç¨‹

1. **è®¿é—®ç®¡ç†åå°**: `/admin/herodex`
2. **æŸ¥çœ‹å¾…è¯„é˜…åŠŸè¯¾**: åœ¨ä»ªè¡¨ç›˜æˆ–åŠŸè¯¾è¯„é˜…é¡µé¢
3. **AIè¯„å®š**: ç‚¹å‡»"è¯·å¸ˆå‚…è¯„å®š"è·å–AIå»ºè®®
4. **è°ƒæ•´å¥–åŠ±**: æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ä¿®ä¸ºç‚¹å’ŒæŠ€èƒ½ç†Ÿç»ƒåº¦
5. **ç¡®è®¤æˆäºˆ**: å®Œæˆè¯„é˜…ï¼Œå¥–åŠ±è‡ªåŠ¨å‘æ”¾ç»™å­©å­

### å­©å­ç«¯æ“ä½œæµç¨‹

1. **æŸ¥çœ‹è§’è‰²é¢æ¿**: `/herodex` - äº†è§£å½“å‰ä¿®ç‚¼è¿›åº¦
2. **å‘ˆæŠ¥åŠŸè¯¾**: `/herodex/submission` - æäº¤ä»Šæ—¥å­¦ä¹ æˆæœ
3. **æŸ¥çœ‹æŠ€èƒ½æ ‘**: `/herodex/skills` - æ¢ç´¢å­¦ä¹ è·¯å¾„
4. **æ¥æ”¶å¥–åŠ±**: å¸ˆå‚…è¯„é˜…åè‡ªåŠ¨è·å¾—ä¿®ä¸ºå’ŒæŠ€èƒ½æå‡

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **React**: ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **shadcn/ui**: UIç»„ä»¶åº“
- **Tailwind CSS**: æ ·å¼æ¡†æ¶
- **i18next**: å›½é™…åŒ–æ”¯æŒ

### åç«¯æŠ€æœ¯æ ˆ
- **Supabase**: æ•°æ®åº“å’Œè®¤è¯
- **PostgreSQL**: å…³ç³»å‹æ•°æ®åº“
- **RLS**: è¡Œçº§å®‰å…¨ç­–ç•¥

### æ•°æ®åº“è®¾è®¡
- `hdx_players`: ç©å®¶ä¿¡æ¯
- `hdx_skills`: æŠ€èƒ½å®šä¹‰
- `hdx_player_skills`: ç©å®¶æŠ€èƒ½è¿›åº¦
- `hdx_daily_submissions`: åŠŸè¯¾å‘ˆæŠ¥
- `hdx_activity_log`: æ´»åŠ¨æ—¥å¿—

## AIé›†æˆ

### æ”¯æŒçš„AIæœåŠ¡
- **OpenAI GPT**: éœ€è¦API Key
- **æœ¬åœ°æ¨¡å‹**: æ”¯æŒOllamaç­‰æœ¬åœ°éƒ¨ç½²
- **æ¨¡æ‹Ÿæ¨¡å¼**: å¼€å‘æµ‹è¯•ç”¨

### AIé…ç½®
```javascript
import { configureAI } from './lib/ai-service';

// é…ç½®OpenAI
configureAI('openai', {
  apiKey: 'your-api-key',
  model: 'gpt-3.5-turbo'
});

// é…ç½®æœ¬åœ°æ¨¡å‹
configureAI('local', {
  baseURL: 'http://localhost:11434',
  model: 'llama2'
});
```

## è‡ªå®šä¹‰å¼€å‘

### æ·»åŠ æ–°æŠ€èƒ½
```javascript
import { skillService } from './lib/supabase';

await skillService.createSkill({
  skill_name_game: 'ä¹é˜´çœŸç»',
  skill_name_real: 'é«˜ç­‰æ•°å­¦',
  description_game: 'ä¼ è¯´ä¸­çš„ç»ä¸–æ­¦åŠŸ...',
  description_real: 'å¾®ç§¯åˆ†åŸºç¡€çŸ¥è¯†',
  subject_id: 'math_subject_id',
  grade_level: 6,
  max_level: 5
});
```

### è‡ªå®šä¹‰ä¸»é¢˜
```css
/* åœ¨ styles/herodex.css ä¸­æ·»åŠ è‡ªå®šä¹‰æ ·å¼ */
.herodex-theme-custom {
  --herodex-primary: #your-color;
  --herodex-xp-gradient: linear-gradient(135deg, #color1, #color2);
}
```

### æ‰©å±•AIè¯„å®š
```javascript
// åœ¨ lib/ai-service.js ä¸­æ·»åŠ è‡ªå®šä¹‰è¯„å®šé€»è¾‘
export async function customEvaluateSubmission(submissionData, skillsData) {
  // è‡ªå®šä¹‰è¯„å®šé€»è¾‘
  return {
    comment: 'è‡ªå®šä¹‰è¯„è¯­',
    suggested_xp: 25,
    suggested_proficiency: [...]
  };
}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ’ä»¶æ— æ³•åŠ è½½ï¼Ÿ**
A: æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£ç¡®æ³¨å†Œåœ¨ `src/plugins/index.js` ä¸­

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ**
A: ç¡®è®¤Supabaseé…ç½®æ­£ç¡®ï¼Œæ£€æŸ¥ç¯å¢ƒå˜é‡

**Q: AIè¯„å®šä¸å·¥ä½œï¼Ÿ**
A: æ£€æŸ¥AIæœåŠ¡é…ç½®ï¼Œç¡®è®¤API Keyæœ‰æ•ˆ

**Q: æƒé™é”™è¯¯ï¼Ÿ**
A: ç¡®è®¤ç”¨æˆ·æ‹¥æœ‰ç›¸åº”çš„æƒé™ï¼Œæ£€æŸ¥RLSç­–ç•¥

### è°ƒè¯•æ¨¡å¼
```javascript
// å¯ç”¨è°ƒè¯•æ—¥å¿—
localStorage.setItem('herodex-debug', 'true');

// æŸ¥çœ‹AIé…ç½®
import { getAIConfig } from './lib/ai-service';
console.log(getAIConfig());
```

## è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/new-feature`
3. æäº¤æ›´æ”¹: `git commit -am 'Add new feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/new-feature`
5. æäº¤Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ–‡æ¡£: `docs/` ç›®å½•
2. æäº¤Issue: GitHub Issues
3. å‚ä¸è®¨è®º: GitHub Discussions

---

**å°ä¾ æˆé•¿å½•** - è®©å­¦ä¹ å˜æˆä¸€åœºæ­¦ä¾ å†’é™©ï¼âš”ï¸